<div class="app-container">
  <!-- Mobile Header -->
  <div class="mobile-header" *ngIf="isMobile">
    <button class="menu-toggle" (click)="toggleSidebar()">
      <i class="bi" [class.bi-list]="!isSidebarExpanded" [class.bi-x-lg]="isSidebarExpanded"></i>
    </button>
    <i class="bi bi-building mobile-logo"></i>
  </div>

  <!-- Tiny Sidebar -->
  <app-tiny-sidebar
    [isDarkMode]="isDarkMode"
    [notificationCount]="notificationCount"
    [userAvatar]="userAvatar"
    [userName]="userName"
    [activeSection]="activeSection"
    (sectionChange)="onSectionChange($event)"
    (themeToggle)="toggleTheme()"
    (notificationsToggle)="toggleNotifications()"
    (userMenuToggle)="toggleUserMenu()">
  </app-tiny-sidebar>

  <!-- Main Sidebar -->
  <app-sidebar
    [isExpanded]="isSidebarExpanded"
    [isMobile]="isMobile"
    [activeSection]="activeSection"
    (toggleSidebar)="toggleSidebar()">
  </app-sidebar>

  <!-- Main Content -->
  <main class="main-content" [class.sidebar-expanded]="isSidebarExpanded">
    <!-- Page Content -->
    <div class="page-content">
      <router-outlet></router-outlet>
    </div>
  </main>

  <!-- User Menu Dropdown -->
  <div class="user-dropdown" [class.show]="isUserMenuOpen">
    <div class="user-info">
      <i [class]="userAvatar" class="user-avatar"></i>
      <div class="user-details">
        <span class="user-name">{{ userName }}</span>
        <span class="user-email">{{ user.email }}</span>
      </div>
    </div>
    <div class="dropdown-divider"></div>
    <ul class="dropdown-menu">
      <li>
        <a routerLink="/settings" (click)="toggleUserMenu()">
          <i class="bi bi-gear"></i>
          Settings
        </a>
      </li>
      <li>
        <a href="#" (click)="toggleUserMenu()">
          <i class="bi bi-box-arrow-right"></i>
          Sign Out
        </a>
      </li>
    </ul>
  </div>

  <!-- Notifications Panel -->
  <div class="notifications-panel" [class.show]="isNotificationsPanelOpen">
    <div class="panel-header">
      <h3>Notifications</h3>
      <button class="close-btn" (click)="toggleNotifications()">
        <i class="bi bi-x-lg"></i>
      </button>
    </div>
    <div class="panel-content">
      <div class="empty-state" *ngIf="!notificationCount">
        <i class="bi bi-bell-slash"></i>
        <p>No new notifications</p>
      </div>
    </div>
  </div>
</div>
