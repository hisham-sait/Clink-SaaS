<div class="container-fluid p-4">
  <!-- Header -->
  <div class="d-flex justify-content-between align-items-center mb-4">
    <h1 class="h3 mb-0">Emissions Tracking</h1>
    <div>
      <button class="btn btn-outline-primary me-2">
        <i class="bi bi-download me-2"></i>Export Data
      </button>
      <button class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addEmissionModal">
        <i class="bi bi-plus-lg me-2"></i>Record Emission
      </button>
    </div>
  </div>

  <!-- Categories Cards -->
  <div class="row g-4 mb-4">
    <div class="col-md-4" *ngFor="let category of categories">
      <div class="card border-0 shadow-sm h-100">
        <div class="card-body">
          <div class="d-flex align-items-center mb-3">
            <div class="rounded-circle bg-primary bg-opacity-10 p-3 me-3">
              <i class="bi bi-{{category.icon}} text-primary fs-4"></i>
            </div>
            <div>
              <h6 class="card-title mb-1">{{category.name}}</h6>
              <small class="text-muted">Track {{category.name.toLowerCase()}} emissions</small>
            </div>
          </div>
          <button class="btn btn-outline-primary btn-sm w-100">
            <i class="bi bi-plus me-2"></i>Add {{category.name}} Emission
          </button>
        </div>
      </div>
    </div>
  </div>

  <!-- Recent Emissions Table -->
  <div class="card border-0 shadow-sm">
    <div class="card-body">
      <h5 class="card-title mb-4">Recent Emissions</h5>
      
      <div class="table-responsive">
        <table class="table table-hover">
          <thead>
            <tr>
              <th>Date</th>
              <th>Category</th>
              <th>Amount (tCO2e)</th>
              <th>Description</th>
              <th>Actions</th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let emission of recentEmissions">
              <td>{{emission.date}}</td>
              <td>
                <span class="badge bg-primary bg-opacity-10 text-primary">
                  {{emission.category}}
                </span>
              </td>
              <td>{{emission.amount}}</td>
              <td>{{emission.description}}</td>
              <td>
                <button class="btn btn-link btn-sm text-danger" (click)="deleteEmission(emission.id)">
                  <i class="bi bi-trash"></i>
                </button>
              </td>
            </tr>
          </tbody>
          <tfoot>
            <tr class="fw-bold">
              <td colspan="2">Total</td>
              <td>{{calculateTotal()}} tCO2e</td>
              <td colspan="2"></td>
            </tr>
          </tfoot>
        </table>
      </div>
    </div>
  </div>

  <!-- Add Emission Modal -->
  <div class="modal fade" id="addEmissionModal" tabindex="-1">
    <div class="modal-dialog">
      <div class="modal-content">
        <div class="modal-header">
          <h5 class="modal-title">Record New Emission</h5>
          <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
        </div>
        <div class="modal-body">
          <form (ngSubmit)="addEmission()">
            <div class="mb-3">
              <label class="form-label">Category</label>
              <select class="form-select" [(ngModel)]="newEmission.category" name="category" required>
                <option value="">Select Category</option>
                <option *ngFor="let cat of categories" [value]="cat.name">{{cat.name}}</option>
              </select>
            </div>
            <div class="mb-3">
              <label class="form-label">Amount (tCO2e)</label>
              <input type="number" class="form-control" [(ngModel)]="newEmission.amount" name="amount" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Date</label>
              <input type="date" class="form-control" [(ngModel)]="newEmission.date" name="date" required>
            </div>
            <div class="mb-3">
              <label class="form-label">Description</label>
              <textarea class="form-control" [(ngModel)]="newEmission.description" name="description" rows="3"></textarea>
            </div>
            <div class="text-end">
              <button type="button" class="btn btn-outline-secondary me-2" data-bs-dismiss="modal">Cancel</button>
              <button type="submit" class="btn btn-primary">Save Emission</button>
            </div>
          </form>
        </div>
      </div>
    </div>
  </div>
</div>
