<div class="banking">
  <!-- Router Outlet for Child Components -->
  <router-outlet></router-outlet>

  <!-- Dashboard Content (shown only when on /books/banking) -->
  <div *ngIf="router.url === '/books/banking'">
    <!-- Page Header -->
    <div class="page-header mb-4">
      <h1>Banking</h1>
      <p class="text-muted">Manage your bank accounts and transactions</p>
    </div>

    <!-- Banking Metrics -->
    <div class="row g-4 mb-4">
      <div class="col-12 col-md-6 col-xl-3" *ngFor="let metric of bankingMetrics">
        <div class="metric-card">
          <div class="metric-header">
            <span class="metric-title">{{ metric.title }}</span>
            <i [class]="metric.icon"></i>
          </div>
          <div class="metric-body">
            <h3 class="metric-value">{{ metric.value }}</h3>
            <div class="metric-details" *ngIf="metric.change">
              <span [class]="'trend ' + metric.trend">
                <i [class]="metric.trend === 'up' ? 'bi bi-arrow-up' : 'bi bi-arrow-down'"></i>
                {{ metric.change }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Quick Access Sections -->
    <div class="row g-4 mb-4">
      <div class="col-12 col-md-6 col-xl-3" *ngFor="let section of bankingSections">
        <div class="feature-card">
          <div class="feature-icon">
            <i [class]="section.icon"></i>
          </div>
          <div class="feature-content">
            <h3>{{ section.title }}</h3>
            <p>{{ section.description }}</p>
            <a [routerLink]="section.link" class="btn btn-link px-0">
              Access
              <i class="bi bi-arrow-right ms-2"></i>
            </a>
          </div>
        </div>
      </div>
    </div>

    <!-- Bank Accounts -->
    <div class="card">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Bank Accounts</h5>
        <div class="header-actions">
          <a routerLink="/books/banking/connect" class="btn btn-link me-2">
            <i class="bi bi-plus-lg"></i>
            Connect Bank
          </a>
          <a routerLink="/books/banking/accounts" class="btn btn-link">
            View All
          </a>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Account Name</th>
                <th>Account Number</th>
                <th>Type</th>
                <th class="text-end">Balance</th>
                <th>Last Updated</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let account of bankAccounts">
                <td>{{ account.name }}</td>
                <td>•••• {{ account.accountNumber.slice(-4) }}</td>
                <td>
                  <span class="account-type" [class]="account.type.toLowerCase().replace(' ', '-')">
                    {{ account.type }}
                  </span>
                </td>
                <td class="text-end">{{ account.balance | currency }}</td>
                <td>{{ account.lastUpdated | date:'MMM d, y' }}</td>
                <td class="text-end">
                  <button class="btn btn-link btn-sm" [routerLink]="['/books/banking/accounts', account.id]">
                    <i class="bi bi-three-dots-vertical"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Recent Transactions -->
    <div class="card mt-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Recent Transactions</h5>
        <div class="header-actions">
          <a routerLink="/books/banking/transactions" class="btn btn-link">
            View All
          </a>
        </div>
      </div>
      <div class="card-body p-0">
        <div class="table-responsive">
          <table class="table table-hover mb-0">
            <thead>
              <tr>
                <th>Date</th>
                <th>Description</th>
                <th>Category</th>
                <th class="text-end">Amount</th>
                <th>Status</th>
                <th></th>
              </tr>
            </thead>
            <tbody>
              <tr *ngFor="let transaction of recentTransactions">
                <td>{{ transaction.date | date:'MMM d, y' }}</td>
                <td>{{ transaction.description }}</td>
                <td>{{ transaction.category }}</td>
                <td [class.text-success]="transaction.type === 'credit'"
                    [class.text-danger]="transaction.type === 'debit'"
                    class="text-end">
                  {{ transaction.type === 'credit' ? '+' : '-' }}{{ transaction.amount | currency }}
                </td>
                <td>
                  <span class="status-badge" [class]="transaction.status.toLowerCase()">
                    {{ transaction.status }}
                  </span>
                </td>
                <td class="text-end">
                  <button class="btn btn-link btn-sm" [routerLink]="['/books/banking/transactions', transaction.id]">
                    <i class="bi bi-three-dots-vertical"></i>
                  </button>
                </td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>

    <!-- Quick Actions -->
    <div class="quick-actions mt-4">
      <div class="row g-4">
        <div class="col-12 col-md-4">
          <a routerLink="/books/banking/transfers" class="btn btn-primary w-100">
            <i class="bi bi-arrow-left-right"></i>
            New Transfer
          </a>
        </div>
        <div class="col-12 col-md-4">
          <a routerLink="/books/banking/statements" class="btn btn-outline-primary w-100">
            <i class="bi bi-file-earmark-text"></i>
            Download Statement
          </a>
        </div>
        <div class="col-12 col-md-4">
          <a routerLink="/books/banking/settings" class="btn btn-outline-primary w-100">
            <i class="bi bi-gear"></i>
            Bank Settings
          </a>
        </div>
      </div>
    </div>
  </div>
</div>
