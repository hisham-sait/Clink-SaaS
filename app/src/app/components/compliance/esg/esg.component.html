<div class="container-fluid p-4">
  <!-- Header -->
  <div class="row mb-4">
    <div class="col">
      <h2 class="mb-3">ESG Management</h2>
      <p class="text-muted">Monitor and manage Environmental, Social, and Governance metrics</p>
    </div>
    <div class="col-auto">
      <button class="btn btn-primary">
        <i class="bi bi-plus-lg me-2"></i>Add Initiative
      </button>
    </div>
  </div>

  <!-- ESG Score Cards -->
  <div class="row g-4 mb-4">
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="card-title mb-0">Environmental Score</h6>
            <i class="bi bi-tree fs-4 text-success"></i>
          </div>
          <h3 class="mb-2">{{statistics.environmentalScore}}/100</h3>
          <div class="progress" style="height: 6px;">
            <div class="progress-bar bg-success" [style.width]="statistics.environmentalScore + '%'"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="card-title mb-0">Social Score</h6>
            <i class="bi bi-people fs-4 text-primary"></i>
          </div>
          <h3 class="mb-2">{{statistics.socialScore}}/100</h3>
          <div class="progress" style="height: 6px;">
            <div class="progress-bar bg-primary" [style.width]="statistics.socialScore + '%'"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="card-title mb-0">Governance Score</h6>
            <i class="bi bi-building fs-4 text-info"></i>
          </div>
          <h3 class="mb-2">{{statistics.governanceScore}}/100</h3>
          <div class="progress" style="height: 6px;">
            <div class="progress-bar bg-info" [style.width]="statistics.governanceScore + '%'"></div>
          </div>
        </div>
      </div>
    </div>
    <div class="col-md-3">
      <div class="card border-0 shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-3">
            <h6 class="card-title mb-0">Budget Utilization</h6>
            <i class="bi bi-cash-stack fs-4 text-warning"></i>
          </div>
          <h3 class="mb-2">{{formatCurrency(statistics.totalSpent)}}</h3>
          <div class="progress" style="height: 6px;">
            <div class="progress-bar bg-warning" 
                 [style.width]="(statistics.totalSpent/statistics.totalBudget*100) + '%'"></div>
          </div>
          <small class="text-muted">of {{formatCurrency(statistics.totalBudget)}}</small>
        </div>
      </div>
    </div>
  </div>

  <!-- ESG Metrics -->
  <div class="row mb-4">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-white border-0">
          <h5 class="mb-0">ESG Metrics</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th scope="col">Metric</th>
                  <th scope="col">Category</th>
                  <th scope="col">Value</th>
                  <th scope="col">Target</th>
                  <th scope="col">Progress</th>
                  <th scope="col">Trend</th>
                  <th scope="col">Status</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let metric of metrics">
                  <td>
                    <div class="fw-medium">{{metric.metric}}</div>
                    <small class="text-muted">{{metric.description}}</small>
                  </td>
                  <td>
                    <i [class]="'bi ' + getCategoryIcon(metric.category) + ' me-2'"></i>
                    {{metric.category}}
                  </td>
                  <td>{{metric.value}} {{metric.unit}}</td>
                  <td>{{metric.target}} {{metric.unit}}</td>
                  <td>
                    <div class="progress" style="height: 6px; width: 100px;">
                      <div class="progress-bar" 
                           [ngClass]="{
                             'bg-success': calculateProgress(metric.value, metric.target) >= 90,
                             'bg-warning': calculateProgress(metric.value, metric.target) >= 60 && calculateProgress(metric.value, metric.target) < 90,
                             'bg-danger': calculateProgress(metric.value, metric.target) < 60
                           }"
                           [style.width]="calculateProgress(metric.value, metric.target) + '%'">
                      </div>
                    </div>
                    <small class="text-muted">{{calculateProgress(metric.value, metric.target)}}%</small>
                  </td>
                  <td>
                    <i [class]="'bi ' + getTrendIcon(metric.trend)"></i>
                  </td>
                  <td>
                    <span class="badge" [ngClass]="getStatusClass(metric.status)">{{metric.status}}</span>
                  </td>
                  <td>
                    <div class="btn-group">
                      <button class="btn btn-sm btn-outline-primary" title="View Details">
                        <i class="bi bi-eye"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-warning" title="Edit">
                        <i class="bi bi-pencil"></i>
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <!-- ESG Initiatives -->
  <div class="row">
    <div class="col-12">
      <div class="card border-0 shadow-sm">
        <div class="card-header bg-white border-0">
          <h5 class="mb-0">ESG Initiatives</h5>
        </div>
        <div class="card-body p-0">
          <div class="table-responsive">
            <table class="table table-hover mb-0">
              <thead class="table-light">
                <tr>
                  <th scope="col">Initiative</th>
                  <th scope="col">Category</th>
                  <th scope="col">Timeline</th>
                  <th scope="col">Budget</th>
                  <th scope="col">Progress</th>
                  <th scope="col">Impact</th>
                  <th scope="col">Status</th>
                  <th scope="col">Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let initiative of initiatives">
                  <td>
                    <div class="fw-medium">{{initiative.title}}</div>
                    <small class="text-muted">{{initiative.description}}</small>
                  </td>
                  <td>
                    <i [class]="'bi ' + getCategoryIcon(initiative.category) + ' me-2'"></i>
                    {{initiative.category}}
                  </td>
                  <td>
                    <div class="small">
                      <div>Start: {{initiative.startDate | date:'mediumDate'}}</div>
                      <div>End: {{initiative.endDate | date:'mediumDate'}}</div>
                    </div>
                  </td>
                  <td>
                    <div>{{formatCurrency(initiative.spent)}}</div>
                    <small class="text-muted">of {{formatCurrency(initiative.budget)}}</small>
                  </td>
                  <td>
                    <div class="progress" style="height: 6px; width: 100px;">
                      <div class="progress-bar" 
                           [ngClass]="{
                             'bg-success': initiative.progress >= 90,
                             'bg-warning': initiative.progress >= 60 && initiative.progress < 90,
                             'bg-danger': initiative.progress < 60
                           }"
                           [style.width]="initiative.progress + '%'">
                      </div>
                    </div>
                    <small class="text-muted">{{initiative.progress}}%</small>
                  </td>
                  <td>
                    <span class="badge" [ngClass]="{
                      'bg-danger': initiative.impact === 'High',
                      'bg-warning': initiative.impact === 'Medium',
                      'bg-info': initiative.impact === 'Low'
                    }">{{initiative.impact}}</span>
                  </td>
                  <td>
                    <span class="badge" [ngClass]="getStatusClass(initiative.status)">{{initiative.status}}</span>
                  </td>
                  <td>
                    <div class="btn-group">
                      <button class="btn btn-sm btn-outline-primary" title="View Details">
                        <i class="bi bi-eye"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-success" title="Update Progress">
                        <i class="bi bi-arrow-up-circle"></i>
                      </button>
                      <button class="btn btn-sm btn-outline-warning" title="Edit">
                        <i class="bi bi-pencil"></i>
                      </button>
                    </div>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
