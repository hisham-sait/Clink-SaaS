<div class="container-fluid p-4">
  <div class="row mb-4">
    <div class="col">
      <h1 class="mb-0">Share Register</h1>
      <p class="text-muted">Manage share classes and record share transfers</p>
    </div>
  </div>

  <div class="row mb-4">
    <div class="col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-4">Add Share Class</h5>
          <form [formGroup]="shareClassForm" (ngSubmit)="onShareClassSubmit()">
            <div class="mb-3">
              <label class="form-label">Share Class Name</label>
              <input type="text" class="form-control" formControlName="name" placeholder="e.g., Ordinary">
            </div>

            <div class="mb-3">
              <label class="form-label">Nominal Value (£)</label>
              <input type="number" class="form-control" formControlName="nominalValue" step="0.01">
            </div>

            <div class="mb-3">
              <label class="form-label">Total Shares</label>
              <input type="number" class="form-control" formControlName="totalShares">
            </div>

            <div class="mb-3">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" formControlName="votingRights" id="votingRights">
                <label class="form-check-label" for="votingRights">Voting Rights</label>
              </div>
            </div>

            <div class="mb-3">
              <div class="form-check">
                <input type="checkbox" class="form-check-input" formControlName="dividendRights" id="dividendRights">
                <label class="form-check-label" for="dividendRights">Dividend Rights</label>
              </div>
            </div>

            <button type="submit" class="btn btn-primary w-100" [disabled]="!shareClassForm.valid">
              Add Share Class
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <h5 class="card-title mb-0">Share Classes</h5>
            <div class="total-capital">
              Total Share Capital: <strong>{{ formatCurrency(calculateTotalShareCapital()) }}</strong>
            </div>
          </div>
          
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Share Class</th>
                  <th>Nominal Value</th>
                  <th>Total Shares</th>
                  <th>Share Capital</th>
                  <th>Rights</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let shareClass of shareClasses; let i = index">
                  <td>{{ shareClass.name }}</td>
                  <td>{{ formatCurrency(shareClass.nominalValue) }}</td>
                  <td>{{ shareClass.totalShares }}</td>
                  <td>{{ formatCurrency(shareClass.nominalValue * shareClass.totalShares) }}</td>
                  <td>
                    <span class="badge bg-primary me-1" *ngIf="shareClass.votingRights">Voting</span>
                    <span class="badge bg-success" *ngIf="shareClass.dividendRights">Dividend</span>
                  </td>
                  <td>
                    <button class="btn btn-sm btn-outline-danger" (click)="removeShareClass(i)">
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
                <tr *ngIf="shareClasses.length === 0">
                  <td colspan="6" class="text-center py-4 text-muted">
                    No share classes added yet
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>

  <div class="row">
    <div class="col-lg-4">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-4">Record Share Transfer</h5>
          <form [formGroup]="transferForm" (ngSubmit)="onTransferSubmit()">
            <div class="mb-3">
              <label class="form-label">Date</label>
              <input type="date" class="form-control" formControlName="date">
            </div>

            <div class="mb-3">
              <label class="form-label">Share Class</label>
              <select class="form-select" formControlName="shareClass">
                <option value="">Select share class</option>
                <option [value]="shareClass.name" *ngFor="let shareClass of shareClasses">
                  {{ shareClass.name }}
                </option>
              </select>
            </div>

            <div class="mb-3">
              <label class="form-label">Transferor</label>
              <input type="text" class="form-control" formControlName="transferor">
            </div>

            <div class="mb-3">
              <label class="form-label">Transferee</label>
              <input type="text" class="form-control" formControlName="transferee">
            </div>

            <div class="mb-3">
              <label class="form-label">Number of Shares</label>
              <input type="number" class="form-control" formControlName="numberOfShares">
            </div>

            <div class="mb-3">
              <label class="form-label">Consideration (£)</label>
              <input type="number" class="form-control" formControlName="consideration" step="0.01">
            </div>

            <div class="mb-3">
              <label class="form-label">Certificate Number</label>
              <input type="text" class="form-control" formControlName="certificateNumber">
            </div>

            <button type="submit" class="btn btn-primary w-100" [disabled]="!transferForm.valid">
              Record Transfer
            </button>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-8">
      <div class="card shadow-sm">
        <div class="card-body">
          <h5 class="card-title mb-4">Transfer History</h5>
          
          <div class="table-responsive">
            <table class="table table-hover">
              <thead>
                <tr>
                  <th>Date</th>
                  <th>Share Class</th>
                  <th>From</th>
                  <th>To</th>
                  <th>Shares</th>
                  <th>Consideration</th>
                  <th>Certificate</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody>
                <tr *ngFor="let transfer of transfers; let i = index">
                  <td>{{ transfer.date | date }}</td>
                  <td>{{ transfer.shareClass }}</td>
                  <td>{{ transfer.transferor }}</td>
                  <td>{{ transfer.transferee }}</td>
                  <td>{{ transfer.numberOfShares }}</td>
                  <td>{{ formatCurrency(transfer.consideration) }}</td>
                  <td>{{ transfer.certificateNumber }}</td>
                  <td>
                    <button class="btn btn-sm btn-outline-danger" (click)="removeTransfer(i)">
                      <i class="bi bi-trash"></i>
                    </button>
                  </td>
                </tr>
                <tr *ngIf="transfers.length === 0">
                  <td colspan="8" class="text-center py-4 text-muted">
                    No transfers recorded yet
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
