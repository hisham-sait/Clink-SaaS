<div class="directors">
  <div class="container-fluid p-4">
    <!-- Header -->
    <div class="page-header d-flex justify-content-between align-items-center mb-4">
      <div>
        <h1>Directors Register</h1>
        <p class="text-muted mb-0">Record and manage company directors and their appointments</p>
      </div>
      <button class="btn btn-primary" (click)="openAddDirectorModal()">
        <i class="bi bi-plus-lg me-2"></i>
        Add Director
      </button>
    </div>

    <!-- Metrics -->
    <div class="row g-4 mb-4">
      <div class="col-md-3">
        <div class="metric-card">
          <div class="metric-header">
            <span class="metric-title">Active Directors</span>
            <i class="bi bi-people"></i>
          </div>
          <div class="metric-body">
            <div class="metric-value">{{ getActiveDirectorsCount() }}</div>
            <div class="metric-details">Currently serving directors</div>
          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="metric-card">
          <div class="metric-header">
            <span class="metric-title">Executive Directors</span>
            <i class="bi bi-person-badge"></i>
          </div>
          <div class="metric-body">
            <div class="metric-value">{{ getExecutiveDirectorsCount() }}</div>
            <div class="metric-details">Executive & Managing Directors</div>
          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="metric-card">
          <div class="metric-header">
            <span class="metric-title">Non-Executive Directors</span>
            <i class="bi bi-person-check"></i>
          </div>
          <div class="metric-body">
            <div class="metric-value">{{ getNonExecutiveDirectorsCount() }}</div>
            <div class="metric-details">Independent & Non-Executive Directors</div>
          </div>
        </div>
      </div>

      <div class="col-md-3">
        <div class="metric-card">
          <div class="metric-header">
            <span class="metric-title">Average Tenure</span>
            <i class="bi bi-calendar-check"></i>
          </div>
          <div class="metric-body">
            <div class="metric-value">{{ getAverageTenure() }}</div>
            <div class="metric-details">years</div>
          </div>
        </div>
      </div>
    </div>

    <!-- Directors Table -->
    <div class="card mb-4">
      <div class="card-header d-flex justify-content-between align-items-center">
        <h5 class="mb-0">Current Directors</h5>
        <button class="btn btn-link" (click)="toggleShowAllDirectors()">
          {{ showAllDirectors ? 'Show Active Only' : 'Show All Directors' }}
        </button>
      </div>
      <div class="table-responsive">
        <table class="table">
          <thead>
            <tr>
              <th>NAME</th>
              <th>TYPE</th>
              <th>APPOINTED</th>
              <th>SERVICE</th>
              <th>SHAREHOLDING</th>
              <th>STATUS</th>
              <th></th>
            </tr>
          </thead>
          <tbody>
            <tr *ngFor="let director of getFilteredDirectors(); let i = index">
              <td>
                <a href="#" class="director-name" (click)="viewDirectorDetails(director, $event)">
                  {{ getFullName(director) }}
                </a>
              </td>
              <td>{{ director.directorType }}</td>
              <td>{{ formatDate(director.appointmentDate) }}</td>
              <td>{{ getServiceDuration(director.appointmentDate, director.resignationDate) }}</td>
              <td>{{ director.shareholding || 'None' }}</td>
              <td>
                <span class="status-badge" [class.active]="director.status === 'Active'" [class.resigned]="director.status === 'Resigned'">
                  {{ director.status }}
                </span>
              </td>
              <td>
                <div class="btn-group">
                  <button class="btn btn-link" (click)="viewDirectorDetails(director, $event)" title="View Details">
                    <i class="bi bi-eye"></i>
                  </button>
                  <button class="btn btn-link" *ngIf="director.status === 'Active'" (click)="markAsResigned(i)" title="Mark as Resigned">
                    <i class="bi bi-person-dash"></i>
                  </button>
                  <button class="btn btn-link text-danger" (click)="removeDirector(i)" title="Remove">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
            <tr *ngIf="getFilteredDirectors().length === 0">
              <td colspan="7" class="text-center py-4">
                <div class="text-muted">No directors found</div>
              </td>
            </tr>
          </tbody>
        </table>
      </div>
    </div>

    <!-- Recent Activities -->
    <div class="card">
      <div class="card-header">
        <h5 class="mb-0">Recent Activities</h5>
      </div>
      <div class="activity-list">
        <div class="activity-item" *ngFor="let activity of recentActivities">
          <div class="activity-icon" [class]="activity.type">
            <i [class]="getActivityIcon(activity.type)"></i>
          </div>
          <div class="activity-content">
            <div class="activity-description">{{ activity.description }}</div>
            <div class="activity-meta">
              <span class="user">{{ activity.user }}</span>
              <span class="time">{{ activity.time }}</span>
            </div>
          </div>
        </div>
        <div *ngIf="recentActivities.length === 0" class="text-center py-4">
          <div class="text-muted">No recent activities</div>
        </div>
      </div>
    </div>
  </div>
</div>
